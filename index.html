<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Baba Folder</title>

<style>
:root{
--bg:#ffffff;
--text:#111;
--card:#f2f2f2;
}

body.dark{
--bg:#0f0f0f;
--text:#ffffff;
--card:#1c1c1c;
}

body{
margin:0;
font-family:Arial, sans-serif;
background:var(--bg);
color:var(--text);
transition:0.3s;
}

header{
padding:20px;
text-align:center;
font-size:28px;
font-weight:bold;
background:linear-gradient(45deg,#ff4b2b,#ff416c);
color:white;
position:relative;
}

.toggle{
position:absolute;
right:20px;
top:20px;
cursor:pointer;
padding:6px 12px;
background:white;
border-radius:20px;
font-size:12px;
color:black;
}

.searchBox{
margin:20px auto;
max-width:500px;
text-align:center;
}

.searchBox input{
width:90%;
padding:10px;
border-radius:25px;
border:none;
outline:none;
font-size:14px;
box-shadow:0 5px 15px rgba(0,0,0,0.1);
}

.container{
padding:20px;
max-width:900px;
margin:auto;
}

.company{
margin-bottom:40px;
padding:20px;
border-radius:15px;
background:linear-gradient(135deg,#667eea,#764ba2);
color:white;
box-shadow:0 10px 25px rgba(0,0,0,0.2);
animation:fadeIn 0.6s ease-in-out;
}

.company h2{
margin-top:0;
}

.model{
background:var(--card);
margin:8px 0;
padding:10px;
border-radius:8px;
display:flex;
justify-content:space-between;
animation:fadeIn 0.4s ease-in-out;
}

@keyframes fadeIn{
from{opacity:0; transform:translateY(10px);}
to{opacity:1; transform:translateY(0);}
}

</style>
</head>
<body>

<header>
Baba Folder
<span class="toggle" onclick="toggleMode()">Toggle</span>
</header>

<div class="searchBox">
<input type="text" id="searchInput" placeholder="Search company or model...">
</div>

<div class="container" id="dataContainer">
Loading...
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBUals9JsemB1NZk9byCaQyx-IESPTCnuU",
  authDomain: "baba-folder.firebaseapp.com",
  projectId: "baba-folder",
  storageBucket: "baba-folder.firebasestorage.app",
  messagingSenderId: "641161753750",
  appId: "1:641161753750:web:d80be1d6affbae5ffffeb7"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const container=document.getElementById("dataContainer");
const searchInput=document.getElementById("searchInput");

let allData=[];

async function loadData(){

container.innerHTML="Loading...";

const querySnapshot = await getDocs(collection(db, "prices"));

allData=[];
querySnapshot.forEach((doc)=>{
allData.push(doc.data());
});

renderData(allData);
}

function renderData(data){

let html="";

data.forEach((item)=>{

html+=`
<div class="company">
<h2>${item.company}</h2>
`;

item.models.forEach(model=>{
html+=`
<div class="model">
<span>${model.name}</span>
<span>â‚¹ ${model.price}</span>
</div>
`;
});

html+=`</div>`;
});

if(html===""){
container.innerHTML="No Data Found";
}else{
container.innerHTML=html;
}
}

searchInput.addEventListener("input",function(){

const value=this.value.toLowerCase();

const filtered=allData.filter(item=>{

if(item.company.toLowerCase().includes(value)) return true;

return item.models.some(m=>m.name.toLowerCase().includes(value));
});

renderData(filtered);
});

loadData();

window.toggleMode=function(){
document.body.classList.toggle("dark");
localStorage.setItem("mode",document.body.classList.contains("dark"));
}

if(localStorage.getItem("mode")==="true"){
document.body.classList.add("dark");
}

</script>

</body>
</html>
